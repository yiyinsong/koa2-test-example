"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _path=require("path"),_path2=_interopRequireDefault(_path),_koa=require("koa"),_koa2=_interopRequireDefault(_koa),_koaStatic=require("koa-static"),_koaStatic2=_interopRequireDefault(_koaStatic),_koaViews=require("koa-views"),_koaViews2=_interopRequireDefault(_koaViews),_koaBody=require("koa-body"),_koaBody2=_interopRequireDefault(_koaBody),_koaSession=require("koa-session"),_koaSession2=_interopRequireDefault(_koaSession),_mongoose=require("mongoose"),_mongoose2=_interopRequireDefault(_mongoose),_mongooseStore=require("./backend/utils/mongoose-store"),_mongooseStore2=_interopRequireDefault(_mongooseStore),_route=require("./backend/routes/route"),_route2=_interopRequireDefault(_route);console.log("-----------------start------------------");var app=new _koa2.default,dbUrl="mongodb://localhost:27017/music",dbConnectOptions={useMongoClient:!0,server:{auto_reconnect:!0,poolSize:10}};app.keys=["keys","keykeys"];var sessionConfig={key:"SESSIONID",maxAge:5e3,overwrite:!0,httpOnly:!0,signed:!0,rolling:!1,store:new _mongooseStore2.default};app.use((0,_koaStatic2.default)(_path2.default.join(__dirname,"../public"))),app.use((0,_koaViews2.default)(_path2.default.join(__dirname,"../views"),{map:{html:"pug",pug:"pug"},extension:"pug"})),app.use((0,_koaBody2.default)({multipart:!0})),app.use((0,_koaSession2.default)(sessionConfig,app)),_mongoose2.default.connect(dbUrl,dbConnectOptions,function(e,o){e?console.log(e):console.log("connect "+dbUrl+" success!")}),app.use(_route2.default.routes()).use(_route2.default.allowedMethods()),app.listen(3e3);